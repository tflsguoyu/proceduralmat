<?xml version="1.0" encoding="utf-8"?>

<scene version="0.5.0">
	
	<integrator type="path">
		<integer name="maxDepth" value="5"/>
		<float name="FireflyFilter" value="0.3"/>
	</integrator>

	<sensor type="perspective">
		<string name="fovAxis" value="x"/>
		<float name="fov" value="27.5"/>
		
		<transform name="toWorld">
			<lookAt origin="0 -2500 800" target="0 0 65" up="0 0 1"/>
		</transform>	

		<sampler type="independent">
			<integer name="sampleCount" value="2048"/>
		</sampler>	
 		
 		<film id="film" type="hdrfilm">
			<integer name="width" value="1920"/>
			<integer name="height" value="720"/>
			
			<!--
            <integer name="cropOffsetX" value="624"/>
			<integer name="cropOffsetX" value="1074"/>
			<integer name="cropOffsetX" value="1300"/>
			
            <integer name="cropOffsetY" value="303"/>
            <integer name="cropWidth" value="230"/>
            <integer name="cropHeight" value="230"/>
			-->
			
			<string name="fileFormat" value="openexr"/>
			<boolean name="banner" value="false"/>
		</film>
	</sensor>

    <emitter type="envmap">
        <string name="filename" value="normals/envmap_hd.exr"/>
        <transform name="toWorld">
            <rotate y="1" angle="280"/>
            <rotate x="1" angle="90"/>
        </transform>
        <float name="scale" value="0.7"/>
    </emitter>

    <shape type="sphere">
        <transform name="toWorld">
            <scale x="40" y="40"/>
            <translate x="-495" y="-165" z="525"/>
        </transform>
        <emitter type="area">
            <spectrum name="radiance" value="250"/>
        </emitter>
        <bsdf type="diffuse">
            <spectrum name="reflectance" value="0"/>
        </bsdf>
    </shape>    

    <shape type="sphere">
        <transform name="toWorld">
            <scale x="80" y="80"/>
            <translate x="250" y="-500" z="525"/>
        </transform>
        <emitter type="area">
            <spectrum name="radiance" value="60"/>
        </emitter>
        <bsdf type="diffuse">
            <spectrum name="reflectance" value="0"/>
        </bsdf>
    </shape>    

    <shape type="sphere">
        <transform name="toWorld">
            <scale x="40" y="40"/>
            <translate x="-150" y="-800" z="50"/>
        </transform>
        <emitter type="area">
            <spectrum name="radiance" value="300"/>
        </emitter>
        <bsdf type="diffuse">
            <spectrum name="reflectance" value="0"/>
        </bsdf>
    </shape>
	
	<!-- real wood -->
	<bsdf type="normalmap" id="wood0">
		<texture type="bitmap">
			<string name="filename" value="maps/realwood_normal_.exr"/>
			<float name="uscale" value="1.5"/>
			<float name="vscale" value="1.5"/>
			<float name="gamma" value="1.0"/>
		</texture>
		<bsdf type="roughplastic">
			<string name="distribution" value="ggx"/>
			<texture name="alpha" type="bitmap">
				<string name="filename" value="maps/realwood_rough_.exr"/>
				<float name="uscale" value="1.5"/>
				<float name="vscale" value="1.5"/>
				<float name="gamma" value="1.0"/>
			</texture>
			<texture name="diffuseReflectance" type="bitmap">
				<string name="filename" value="maps/realwood_albedo.exr"/>
				<float name="uscale" value="1.5"/>
				<float name="vscale" value="1.5"/>
				<float name="gamma" value="1.0"/>
			</texture>
		</bsdf>
	</bsdf>
	
	<!-- real leather -->
	<bsdf type="normalmap" id="leather0">
		<texture type="bitmap">
			<string name="filename" value="maps/leather_normal_.exr"/>
			<float name="uscale" value="15"/>
			<float name="vscale" value="15"/>
			<float name="gamma" value="1.0"/>
		</texture>
		<bsdf type="roughplastic">
			<string name="distribution" value="ggx"/>
			<texture name="alpha" type="bitmap">
				<string name="filename" value="maps/leather_rough_.exr"/>
				<float name="uscale" value="15"/>
				<float name="vscale" value="15"/>
				<float name="gamma" value="1.0"/>
			</texture>
			<texture name="diffuseReflectance" type="bitmap">
				<string name="filename" value="maps/leather_albedo.exr"/>
				<float name="uscale" value="15"/>
				<float name="vscale" value="15"/>
				<float name="gamma" value="1.0"/>
			</texture>
		</bsdf>
	</bsdf>
	
	<!-- real plaster -->
	<bsdf type="twosided" id="plaster0">
		<bsdf type="normalmap">
			<texture type="bitmap">
				<string name="filename" value="maps/plaster_normal_.exr"/>
				<float name="uscale" value="3"/>
				<float name="vscale" value="3"/>
				<float name="gamma" value="1.0"/>
			</texture>
			<bsdf type="roughplastic">
				<string name="distribution" value="ggx"/>
				<texture name="alpha" type="bitmap">
					<string name="filename" value="maps/plaster_rough_.exr"/>
					<float name="uscale" value="3"/>
					<float name="vscale" value="3"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<texture name="diffuseReflectance" type="scale">
					<float name="scale" value="0.6"/>
					<texture type="bitmap">
						<string name="filename" value="maps/plaster_albedo.exr"/>
						<float name="uscale" value="3"/>
						<float name="vscale" value="3"/>
						<float name="gamma" value="1.0"/>
					</texture>
				</texture>
			</bsdf>
		</bsdf>
	</bsdf>

	<!-- real bump -->
	<bsdf type="twosided" id="bump0">
		<bsdf type="normalmap">
			<texture type="bitmap">
				<string name="filename" value="maps/realbump_normal_.exr"/>
				<float name="uscale" value="0.3"/>
				<float name="vscale" value="0.3"/>
				<float name="gamma" value="1.0"/>
			</texture>
			<bsdf type="roughplastic">
				<string name="distribution" value="ggx"/>
				<texture name="alpha" type="bitmap">
					<string name="filename" value="maps/realbump_rough_.exr"/>
					<float name="uscale" value="0.3"/>
					<float name="vscale" value="0.3"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<texture name="diffuseReflectance" type="bitmap">
					<string name="filename" value="maps/realbump_albedo.exr"/>
					<float name="uscale" value="0.3"/>
					<float name="vscale" value="0.3"/>
					<float name="gamma" value="1.0"/>
				</texture>
			</bsdf>
		</bsdf>
	</bsdf>
	
	<!-- synthetic flake -->
	<bsdf type="twosided" id="flake0">
		<bsdf type="mixturebsdf">
			<string name="weights" value="0.5, 0.5"/>
			<bsdf type="normalmap">
				<texture type="bitmap">
					<string name="filename" value="maps/flake_normal_flake_.exr"/>
					<float name="uscale" value="10"/>
					<float name="vscale" value="10"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<bsdf type="roughconductor">
					<texture name="alpha" type="bitmap">
						<string name="filename" value="maps/flake_rough_flake_.exr"/>
						<float name="uscale" value="10"/>
						<float name="vscale" value="10"/>
						<float name="gamma" value="1.0"/>
					</texture>
					<texture name="specularReflectance" type="bitmap">
						<string name="filename" value="maps/flake_f0_flake.exr"/>
						<float name="uscale" value="10"/>
						<float name="vscale" value="10"/>
						<float name="gamma" value="1.0"/>
					</texture>
					<string name="material" value="Al"/>
				</bsdf>
			</bsdf>
			<bsdf type="roughplastic">
				<string name="distribution" value="ggx"/>
				<texture name="alpha" type="bitmap">
					<string name="filename" value="maps/flake_rough_top_.exr"/>
					<float name="uscale" value="10"/>
					<float name="vscale" value="10"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<texture name="diffuseReflectance" type="bitmap">
					<string name="filename" value="maps/flake_albedo.exr"/>
					<float name="uscale" value="10"/>
					<float name="vscale" value="10"/>
					<float name="gamma" value="1.0"/>
				</texture>
			</bsdf>
		</bsdf>
	</bsdf>
	
	<!-- real metal -->
	<bsdf type="twosided" id="metal0">
		<bsdf type="normalmap">
			<texture type="bitmap">
				<string name="filename" value="maps/realmetal_normal_.exr"/>
				<float name="uscale" value="10"/>
				<float name="vscale" value="10"/>
				<float name="gamma" value="1.0"/>
			</texture>
			<bsdf type="roughconductor">
				<texture name="alphaU" type="bitmap">
					<string name="filename" value="maps/realmetal_roughx_.exr"/>
					<float name="uscale" value="10"/>
					<float name="vscale" value="10"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<texture name="alphaV" type="bitmap">
					<string name="filename" value="maps/realmetal_roughy_.exr"/>
					<float name="uscale" value="10"/>
					<float name="vscale" value="10"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<string name="distribution" value="ggx"/>
				<texture name="specularReflectance" type="bitmap">
					<string name="filename" value="maps/realmetal_f0.exr"/>
					<float name="uscale" value="10"/>
					<float name="vscale" value="10"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<string name="material" value="Al"/>
			</bsdf>
		</bsdf>
	</bsdf>
	
	<!-- synthetic metal -->
	<bsdf type="twosided" id="metal1">
		<bsdf type="normalmap">
			<texture type="bitmap">
				<string name="filename" value="maps/metal_normal_.exr"/>
				<float name="uscale" value="10"/>
				<float name="vscale" value="10"/>
				<float name="gamma" value="1.0"/>
			</texture>
			<bsdf type="roughconductor">
				<texture name="alphaU" type="bitmap">
					<string name="filename" value="maps/metal_roughy_.exr"/>
					<float name="uscale" value="10"/>
					<float name="vscale" value="10"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<texture name="alphaV" type="bitmap">
					<string name="filename" value="maps/metal_roughx_.exr"/>
					<float name="uscale" value="10"/>
					<float name="vscale" value="10"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<string name="distribution" value="ggx"/>
				<texture name="specularReflectance" type="bitmap">
					<string name="filename" value="maps/metal_f0.exr"/>
					<float name="uscale" value="10"/>
					<float name="vscale" value="10"/>
					<float name="gamma" value="1.0"/>
				</texture>
				<string name="material" value="Al"/>
			</bsdf>
		</bsdf>
	</bsdf>
	
	<!-- floor -->
	<shape type="rectangle">
		<transform name="toWorld">
			<scale x="700.0" y="700.0"/>
			<translate x="0" y="0" z="-101"/>
		</transform>
		<ref id="wood0"/>
	</shape>

	<!-- back wall -->
	<shape type="rectangle">
		<transform name="toWorld">
			<scale x="1000.0" y="1000.0"/>
			<rotate x="1" angle="90"/>
			<translate x="0" y="250" z="0"/>
		</transform>
		<ref id="leather0"/>
	</shape>

	<shape type="obj">
		<transform name="toWorld">
			<scale x="1.2" y="1.2" z="1.2"/>
			<rotate z="1" angle="180"/>			
			<translate x="-300" y="20" z="53"/>
		</transform>
		<string name="filename" value="model/vase2.obj"/>		
		<ref id="plaster0"/>
	</shape>

	<shape type="obj">
		<transform name="toWorld">
			<scale x="1.2" y="1.2" z="1.2"/>
			<rotate z="1" angle="180"/>			
			<translate x="-150" y="20" z="53"/>
		</transform>
		<string name="filename" value="model/vase2.obj"/>
		<ref id="bump0"/>
	</shape>

	<shape type="obj">
		<transform name="toWorld">
			<scale x="1.2" y="1.2" z="1.2"/>
			<rotate z="1" angle="180"/>			
			<translate x="0" y="20" z="53"/>
		</transform>
		<string name="filename" value="model/vase2.obj"/>

		<ref id="flake0"/>
	</shape>

	<shape type="obj">
		<transform name="toWorld">
			<scale x="1.2" y="1.2" z="1.2"/>
			<rotate z="1" angle="180"/>			
			<translate x="300" y="20" z="53"/>
		</transform>
		<string name="filename" value="model/vase2.obj"/>

		<ref id="metal0"/>
	</shape>

	<shape type="obj">
		<transform name="toWorld">
			<scale x="1.2" y="1.2" z="1.2"/>
			<rotate z="1" angle="180"/>			
			<translate x="150" y="20" z="53"/>
		</transform>
		<string name="filename" value="model/vase2.obj"/>

		<ref id="metal1"/>
	</shape>
</scene>